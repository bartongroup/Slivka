<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>slivka.scheduler &#8212; Slivka 0.1.dev1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.dev1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="slivka.server" href="slivka.server.html" />
    <link rel="prev" title="slivka.db" href="slivka.db.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="slivka-scheduler">
<h1>slivka.scheduler<a class="headerlink" href="#slivka-scheduler" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-slivka.scheduler.command">
<span id="slivka-scheduler-command-module"></span><h2>slivka.scheduler.command module<a class="headerlink" href="#module-slivka.scheduler.command" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="slivka.scheduler.command.CommandOption">
<em class="property">class </em><code class="descclassname">slivka.scheduler.command.</code><code class="descname">CommandOption</code><span class="sig-paren">(</span><em>name</em>, <em>param</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.command.CommandOption" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class provides a building block for command line construction.
Each <code class="docutils literal"><span class="pre">CommandOption</span></code> instance corresponds to a single option or
argument which can be passed to the command.
<code class="docutils literal"><span class="pre">CommandOption</span></code> holds a template of the argument with <em>$value</em> in place
of the option value. Using <code class="docutils literal"><span class="pre">get_cmd_option</span></code> you can insert a
specific value to the template and obtain the command arguments.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">opt</span> <span class="o">=</span> <span class="n">CommandOption</span><span class="p">(</span><span class="s1">&#39;optName&#39;</span><span class="p">,</span> <span class="s1">&#39;-o $value&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt</span><span class="o">.</span><span class="n">get_cmd_option</span><span class="p">()</span>
<span class="go">&#39;-o default&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt</span><span class="o">.</span><span class="n">get_cmd_option</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="go">&#39;-o hello&#39;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">opt</span> <span class="o">=</span> <span class="n">CommandOption</span><span class="p">(</span><span class="s1">&#39;optName&#39;</span><span class="p">,</span> <span class="s1">&#39;arg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt</span><span class="o">.</span><span class="n">get_cmd_option</span><span class="p">()</span>  <span class="c1"># None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt</span><span class="o">.</span><span class="n">get_cmd_option</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;arg&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="slivka.scheduler.command.CommandOption.get_cmd_option">
<code class="descname">get_cmd_option</code><span class="sig-paren">(</span><em>value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.command.CommandOption.get_cmd_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Return command option with inserted value.</p>
<p>Insert specified value to option template. If <code class="docutils literal"><span class="pre">value</span></code> is not
given then use default value. If the value still evaluates to
<code class="docutils literal"><span class="pre">None</span></code>, return <code class="docutils literal"><span class="pre">None</span></code> so the option will be skipped in further
processing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> &#8211; value of the field</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">command option string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.command.CommandOption.name">
<code class="descname">name</code><a class="headerlink" href="#slivka.scheduler.command.CommandOption.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.command.PathWrapper">
<em class="property">class </em><code class="descclassname">slivka.scheduler.command.</code><code class="descname">PathWrapper</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.command.PathWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class provides a uniform way to obtain path(s) to output files
produced by the running job. Path to the file is appended to the current
working directory of the job.</p>
<dl class="method">
<dt id="slivka.scheduler.command.PathWrapper.get_paths">
<code class="descname">get_paths</code><span class="sig-paren">(</span><em>cwd</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.command.PathWrapper.get_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the full absolute path to the output file.</p>
<p>Returns an absolute path to the output file regardless of its
existence on the file system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list with a single path to the file</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.command.PatternPathWrapper">
<em class="property">class </em><code class="descclassname">slivka.scheduler.command.</code><code class="descname">PatternPathWrapper</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.command.PatternPathWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.command.PathWrapper" title="slivka.scheduler.command.PathWrapper"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.command.PathWrapper</span></code></a></p>
<p>Extends the simple <code class="docutils literal"><span class="pre">PathWrapper</span></code> providing the ability to return
multiple paths to all files matched by the regular expression.</p>
<dl class="method">
<dt id="slivka.scheduler.command.PatternPathWrapper.get_paths">
<code class="descname">get_paths</code><span class="sig-paren">(</span><em>cwd</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.command.PatternPathWrapper.get_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Get paths to files matched by the pattern.</p>
<p>Returns the list of paths to all files in the current working
directory of the job matching the regular expression that exist at
the moment of the function call.
Can return an empty list if there are no files matching the regex.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of paths matching the regex</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-slivka.scheduler.exc">
<span id="slivka-scheduler-exc-module"></span><h2>slivka.scheduler.exc module<a class="headerlink" href="#module-slivka.scheduler.exc" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="slivka.scheduler.exc.JobNotFoundError">
<em class="property">exception </em><code class="descclassname">slivka.scheduler.exc.</code><code class="descname">JobNotFoundError</code><a class="headerlink" href="#slivka.scheduler.exc.JobNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.exc.QueueError" title="slivka.scheduler.exc.QueueError"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.exc.QueueError</span></code></a></p>
<p>Job with the given id not found.</p>
</dd></dl>

<dl class="exception">
<dt id="slivka.scheduler.exc.QueueBrokenError">
<em class="property">exception </em><code class="descclassname">slivka.scheduler.exc.</code><code class="descname">QueueBrokenError</code><a class="headerlink" href="#slivka.scheduler.exc.QueueBrokenError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.exc.QueueError" title="slivka.scheduler.exc.QueueError"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.exc.QueueError</span></code></a></p>
<p>Error raised when the queue is broken and all other requests for resource
will fail.</p>
</dd></dl>

<dl class="exception">
<dt id="slivka.scheduler.exc.QueueError">
<em class="property">exception </em><code class="descclassname">slivka.scheduler.exc.</code><code class="descname">QueueError</code><a class="headerlink" href="#slivka.scheduler.exc.QueueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">RuntimeError</span></code></p>
<p>Superclass of all queue related error statuses</p>
</dd></dl>

<dl class="exception">
<dt id="slivka.scheduler.exc.QueueUnavailableError">
<em class="property">exception </em><code class="descclassname">slivka.scheduler.exc.</code><code class="descname">QueueUnavailableError</code><a class="headerlink" href="#slivka.scheduler.exc.QueueUnavailableError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.exc.QueueError" title="slivka.scheduler.exc.QueueError"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.exc.QueueError</span></code></a></p>
<p>Exception raised when the queue is temporarily not available but resource
will be accessible in the future</p>
</dd></dl>

<dl class="exception">
<dt id="slivka.scheduler.exc.ServerError">
<em class="property">exception </em><code class="descclassname">slivka.scheduler.exc.</code><code class="descname">ServerError</code><a class="headerlink" href="#slivka.scheduler.exc.ServerError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.exc.QueueBrokenError" title="slivka.scheduler.exc.QueueBrokenError"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.exc.QueueBrokenError</span></code></a></p>
<p>Internal server error</p>
</dd></dl>

</div>
<div class="section" id="module-slivka.scheduler.executors">
<span id="slivka-scheduler-executors-module"></span><h2>slivka.scheduler.executors module<a class="headerlink" href="#module-slivka.scheduler.executors" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="slivka.scheduler.executors.Executor">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">Executor</code><span class="sig-paren">(</span><em>*</em>, <em>bin=''</em>, <em>options=None</em>, <em>qargs=None</em>, <em>result_paths=None</em>, <em>log_paths=None</em>, <em>env=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Executor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="slivka.scheduler.executors.Executor.bin">
<code class="descname">bin</code><a class="headerlink" href="#slivka.scheduler.executors.Executor.bin" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of executable command chunks</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Executor.env">
<code class="descname">env</code><a class="headerlink" href="#slivka.scheduler.executors.Executor.env" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.executors.Executor.get_job_cls">
<em class="property">static </em><code class="descname">get_job_cls</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Executor.get_job_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the job class used by this executor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Class of the associated job</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.Executor.get_options">
<code class="descname">get_options</code><span class="sig-paren">(</span><em>values</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Executor.get_options" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of command options</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Executor.log_paths">
<code class="descname">log_paths</code><a class="headerlink" href="#slivka.scheduler.executors.Executor.log_paths" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.executors.Executor.make_from_conf">
<em class="property">static </em><code class="descname">make_from_conf</code><span class="sig-paren">(</span><em>conf</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Executor.make_from_conf" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>conf</strong> &#8211; configuration dictionary grabbed from the config file</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary of executors for each configuration</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(dict[str, <a class="reference internal" href="#slivka.scheduler.executors.Executor" title="slivka.scheduler.executors.Executor">Executor</a>], <a class="reference internal" href="#slivka.scheduler.executors.JobLimits" title="slivka.scheduler.executors.JobLimits">JobLimits</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Executor.qargs">
<code class="descname">qargs</code><a class="headerlink" href="#slivka.scheduler.executors.Executor.qargs" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of queue configuration arguments</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Executor.result_paths">
<code class="descname">result_paths</code><a class="headerlink" href="#slivka.scheduler.executors.Executor.result_paths" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.Executor.submit">
<code class="descname">submit</code><span class="sig-paren">(</span><em>values</em>, <em>cwd</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Executor.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit the job with given options.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.GridEngineExec">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">GridEngineExec</code><span class="sig-paren">(</span><em>*</em>, <em>bin=''</em>, <em>options=None</em>, <em>qargs=None</em>, <em>result_paths=None</em>, <em>log_paths=None</em>, <em>env=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.GridEngineExec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.executors.Executor" title="slivka.scheduler.executors.Executor"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.executors.Executor</span></code></a></p>
<dl class="staticmethod">
<dt id="slivka.scheduler.executors.GridEngineExec.get_job_cls">
<em class="property">static </em><code class="descname">get_job_cls</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.GridEngineExec.get_job_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.GridEngineExec.job_submission_regex">
<code class="descname">job_submission_regex</code><em class="property"> = re.compile('Your job (\\d+) \\(.+\\) has been submitted')</em><a class="headerlink" href="#slivka.scheduler.executors.GridEngineExec.job_submission_regex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.GridEngineExec.submit">
<code class="descname">submit</code><span class="sig-paren">(</span><em>values</em>, <em>cwd</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.GridEngineExec.submit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.GridEngineJob">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">GridEngineJob</code><span class="sig-paren">(</span><em>job_id</em>, <em>cwd</em>, <em>exe</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.GridEngineJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.executors.Job" title="slivka.scheduler.executors.Job"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.executors.Job</span></code></a></p>
<dl class="method">
<dt id="slivka.scheduler.executors.GridEngineJob.get_result">
<code class="descname">get_result</code><span class="sig-paren">(</span><em>job_id</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.GridEngineJob.get_result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.GridEngineJob.get_status">
<code class="descname">get_status</code><span class="sig-paren">(</span><em>job_id</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.GridEngineJob.get_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.GridEngineJob.job_status_regex_pattern">
<code class="descname">job_status_regex_pattern</code><em class="property"> = '^{0}\\s+[\\d\\.]+\\s+.*?\\s+[\\w-]+\\s+(\\w{{1,3}})\\s+[\\d/]+\\s+[\\d:]+\\s+[\\w&#64;\\.-]*\\s+\\d+$'</em><a class="headerlink" href="#slivka.scheduler.executors.GridEngineJob.job_status_regex_pattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.Job">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">Job</code><span class="sig-paren">(</span><em>job_id</em>, <em>cwd</em>, <em>exe</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.STATUS_COMPLETED">
<code class="descname">STATUS_COMPLETED</code><em class="property"> = 'completed'</em><a class="headerlink" href="#slivka.scheduler.executors.Job.STATUS_COMPLETED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.STATUS_DELETED">
<code class="descname">STATUS_DELETED</code><em class="property"> = 'deleted'</em><a class="headerlink" href="#slivka.scheduler.executors.Job.STATUS_DELETED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.STATUS_ERROR">
<code class="descname">STATUS_ERROR</code><em class="property"> = 'error'</em><a class="headerlink" href="#slivka.scheduler.executors.Job.STATUS_ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.STATUS_FAILED">
<code class="descname">STATUS_FAILED</code><em class="property"> = 'failed'</em><a class="headerlink" href="#slivka.scheduler.executors.Job.STATUS_FAILED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.STATUS_QUEUED">
<code class="descname">STATUS_QUEUED</code><em class="property"> = 'queued'</em><a class="headerlink" href="#slivka.scheduler.executors.Job.STATUS_QUEUED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.STATUS_RUNNING">
<code class="descname">STATUS_RUNNING</code><em class="property"> = 'running'</em><a class="headerlink" href="#slivka.scheduler.executors.Job.STATUS_RUNNING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.cached_status">
<code class="descname">cached_status</code><a class="headerlink" href="#slivka.scheduler.executors.Job.cached_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.cwd">
<code class="descname">cwd</code><a class="headerlink" href="#slivka.scheduler.executors.Job.cwd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.Job.get_result">
<code class="descname">get_result</code><span class="sig-paren">(</span><em>job_id</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Job.get_result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.Job.get_status">
<code class="descname">get_status</code><span class="sig-paren">(</span><em>job_id</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Job.get_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the completion status of the job.</p>
<p>This method should be overridden in all <code class="docutils literal"><span class="pre">Job</span></code> subclasses to check
the job status in a way specific to the execution method.
It returns one of the status constants specified in the class fields.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job_id</strong> &#8211; unique identificator allowing to recognise the job.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.Job.is_finished">
<code class="descname">is_finished</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.Job.is_finished" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.log_paths">
<code class="descname">log_paths</code><a class="headerlink" href="#slivka.scheduler.executors.Job.log_paths" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.result_paths">
<code class="descname">result_paths</code><a class="headerlink" href="#slivka.scheduler.executors.Job.result_paths" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.return_code">
<code class="descname">return_code</code><a class="headerlink" href="#slivka.scheduler.executors.Job.return_code" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.executors.Job.status">
<code class="descname">status</code><a class="headerlink" href="#slivka.scheduler.executors.Job.status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.JobLimits">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">JobLimits</code><a class="headerlink" href="#slivka.scheduler.executors.JobLimits" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="slivka.scheduler.executors.JobLimits.configurations">
<code class="descname">configurations</code><em class="property"> = []</em><a class="headerlink" href="#slivka.scheduler.executors.JobLimits.configurations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.JobLimits.get_conf">
<code class="descname">get_conf</code><span class="sig-paren">(</span><em>fields</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.JobLimits.get_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.JobLimits.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>values</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.JobLimits.setup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.LocalExec">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">LocalExec</code><span class="sig-paren">(</span><em>*</em>, <em>bin=''</em>, <em>options=None</em>, <em>qargs=None</em>, <em>result_paths=None</em>, <em>log_paths=None</em>, <em>env=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.LocalExec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.executors.Executor" title="slivka.scheduler.executors.Executor"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.executors.Executor</span></code></a></p>
<dl class="staticmethod">
<dt id="slivka.scheduler.executors.LocalExec.get_job_cls">
<em class="property">static </em><code class="descname">get_job_cls</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.LocalExec.get_job_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.LocalExec.submit">
<code class="descname">submit</code><span class="sig-paren">(</span><em>values</em>, <em>cwd</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.LocalExec.submit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.LocalJob">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">LocalJob</code><span class="sig-paren">(</span><em>job_id</em>, <em>cwd</em>, <em>exe</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.LocalJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.executors.Job" title="slivka.scheduler.executors.Job"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.executors.Job</span></code></a></p>
<dl class="method">
<dt id="slivka.scheduler.executors.LocalJob.get_result">
<code class="descname">get_result</code><span class="sig-paren">(</span><em>job_id</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.LocalJob.get_result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.LocalJob.get_status">
<code class="descname">get_status</code><span class="sig-paren">(</span><em>job_id</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.LocalJob.get_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.ShellExec">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">ShellExec</code><span class="sig-paren">(</span><em>*</em>, <em>bin=''</em>, <em>options=None</em>, <em>qargs=None</em>, <em>result_paths=None</em>, <em>log_paths=None</em>, <em>env=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.ShellExec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.executors.Executor" title="slivka.scheduler.executors.Executor"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.executors.Executor</span></code></a></p>
<dl class="staticmethod">
<dt id="slivka.scheduler.executors.ShellExec.get_job_cls">
<em class="property">static </em><code class="descname">get_job_cls</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.ShellExec.get_job_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.ShellExec.submit">
<code class="descname">submit</code><span class="sig-paren">(</span><em>values</em>, <em>cwd</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.ShellExec.submit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.executors.ShellJob">
<em class="property">class </em><code class="descclassname">slivka.scheduler.executors.</code><code class="descname">ShellJob</code><span class="sig-paren">(</span><em>job_id</em>, <em>cwd</em>, <em>exe</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.ShellJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#slivka.scheduler.executors.Job" title="slivka.scheduler.executors.Job"><code class="xref py py-class docutils literal"><span class="pre">slivka.scheduler.executors.Job</span></code></a></p>
<dl class="method">
<dt id="slivka.scheduler.executors.ShellJob.get_result">
<code class="descname">get_result</code><span class="sig-paren">(</span><em>process</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.ShellJob.get_result" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.executors.ShellJob.get_status">
<code class="descname">get_status</code><span class="sig-paren">(</span><em>process</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.executors.ShellJob.get_status" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-slivka.scheduler.scheduler">
<span id="slivka-scheduler-scheduler-module"></span><h2>slivka.scheduler.scheduler module<a class="headerlink" href="#module-slivka.scheduler.scheduler" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="slivka.scheduler.scheduler.JobWrapper">
<em class="property">class </em><code class="descclassname">slivka.scheduler.scheduler.</code><code class="descname">JobWrapper</code><span class="sig-paren">(</span><em>job</em>, <em>request_id</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.JobWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="slivka.scheduler.scheduler.JobWrapper.job">
<code class="descname">job</code><a class="headerlink" href="#slivka.scheduler.scheduler.JobWrapper.job" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.scheduler.JobWrapper.request_id">
<code class="descname">request_id</code><a class="headerlink" href="#slivka.scheduler.scheduler.JobWrapper.request_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.scheduler.Scheduler">
<em class="property">class </em><code class="descclassname">slivka.scheduler.scheduler.</code><code class="descname">Scheduler</code><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Scans the database for new tasks and dispatches them to executors.</p>
<dl class="method">
<dt id="slivka.scheduler.scheduler.Scheduler.collector_loop">
<code class="descname">collector_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.collector_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Main loop which collects finished jobs from queues.
For each finished job it starts final procedures and saves the result
to the database.</p>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.scheduler.Scheduler.database_poll_loop">
<code class="descname">database_poll_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.database_poll_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps checking database for pending requests.
Submits a new job if one is found.</p>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.scheduler.Scheduler.get_executor">
<code class="descname">get_executor</code><span class="sig-paren">(</span><em>service</em>, <em>configuration</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.get_executor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the executor for specified service and configuration.
Raises KeyError is configuration or service not found.
:param service: service to run
:param configuration: executor configuration
:return: executor object for given configuration
:rtype: Executor</p>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.scheduler.Scheduler.is_running">
<code class="descname">is_running</code><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.is_running" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">if the scheduler is currently running.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.scheduler.Scheduler.join">
<code class="descname">join</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Blocks until scheduler stops working.</p>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.scheduler.Scheduler.logger">
<code class="descname">logger</code><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.logger" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">current scheduler logger</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.scheduler.Scheduler.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends shutdown signal and starts exit process.</p>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.scheduler.Scheduler.start">
<code class="descname">start</code><span class="sig-paren">(</span><em>async=False</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the scheduler and it&#8217;s working threads.</p>
<p>It launches poller and collector threads of the scheduler which scan
the database and dispatch the tasks respectively. If <code class="docutils literal"><span class="pre">async</span></code>
parameter is set to <code class="docutils literal"><span class="pre">False</span></code>, it blocks until keyboard interrupt
signal is received. After that, it stops the polling and collecting
threads and join them before returning.</p>
<p>Setting <code class="docutils literal"><span class="pre">async</span></code> to <code class="docutils literal"><span class="pre">True</span></code> will cause the method to return
immediately after spawning collector and poll threads which will
run in the background. When started asynchronously, the scheduler&#8217;s
shutdown method shoud be called manually by the main thread.
This option is especially usefun in interactive debugging of testing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>async</strong> &#8211; whether the scheduler should not block</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.scheduler.Scheduler.submit_job">
<code class="descname">submit_job</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.scheduler.Scheduler.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts a new job based on the data in the database for given Request.
:param request: request database record
:type request: Request</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-slivka.scheduler.task_queue">
<span id="slivka-scheduler-task-queue-module"></span><h2>slivka.scheduler.task_queue module<a class="headerlink" href="#module-slivka.scheduler.task_queue" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="slivka.scheduler.task_queue.LocalCommand">
<em class="property">class </em><code class="descclassname">slivka.scheduler.task_queue.</code><code class="descname">LocalCommand</code><span class="sig-paren">(</span><em>cmd</em>, <em>cwd</em>, <em>env=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class used for a local command execution.
:type _cmd: list[str]
:type _env: dict[str, str]
:type _cwd: str
:type _process: subprocess.Popen
:type _status: str
:type _return_code: str</p>
<dl class="attribute">
<dt id="slivka.scheduler.task_queue.LocalCommand.STATUS_COMPLETED">
<code class="descname">STATUS_COMPLETED</code><em class="property"> = 'completed'</em><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.STATUS_COMPLETED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.LocalCommand.STATUS_FAILED">
<code class="descname">STATUS_FAILED</code><em class="property"> = 'failed'</em><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.STATUS_FAILED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.LocalCommand.STATUS_QUEUED">
<code class="descname">STATUS_QUEUED</code><em class="property"> = 'queued'</em><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.STATUS_QUEUED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.LocalCommand.STATUS_RUNNING">
<code class="descname">STATUS_RUNNING</code><em class="property"> = 'running'</em><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.STATUS_RUNNING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.LocalCommand.is_finished">
<code class="descname">is_finished</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.is_finished" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.LocalCommand.kill">
<code class="descname">kill</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.kill" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>OSError</strong> &#8211; no such process</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.LocalCommand.resume">
<code class="descname">resume</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.resume" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.LocalCommand.return_code">
<code class="descname">return_code</code><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.return_code" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.LocalCommand.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the command locally as a new subprocess.
:return: output of the running process
:rtype: ProcessOutput
:raise FileNotFoundError: working dir from settings does not exist
:raise OSError: error occurred when starting the process</p>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.LocalCommand.status">
<code class="descname">status</code><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.LocalCommand.suspend">
<code class="descname">suspend</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.suspend" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.LocalCommand.terminate">
<code class="descname">terminate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.LocalCommand.terminate" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>OSError</strong> &#8211; no such process</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.task_queue.ProcessOutput">
<em class="property">class </em><code class="descclassname">slivka.scheduler.task_queue.</code><code class="descname">ProcessOutput</code><span class="sig-paren">(</span><em>return_code</em>, <em>stdout</em>, <em>stderr</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.ProcessOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">tuple</span></code></p>
<dl class="attribute">
<dt id="slivka.scheduler.task_queue.ProcessOutput.return_code">
<code class="descname">return_code</code><a class="headerlink" href="#slivka.scheduler.task_queue.ProcessOutput.return_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.ProcessOutput.stderr">
<code class="descname">stderr</code><a class="headerlink" href="#slivka.scheduler.task_queue.ProcessOutput.stderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.ProcessOutput.stdout">
<code class="descname">stdout</code><a class="headerlink" href="#slivka.scheduler.task_queue.ProcessOutput.stdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.task_queue.QueueServer">
<em class="property">class </em><code class="descclassname">slivka.scheduler.task_queue.</code><code class="descname">QueueServer</code><span class="sig-paren">(</span><em>host</em>, <em>port</em>, <em>get_job</em>, <em>add_job</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">threading.Thread</span></code></p>
<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.HEAD_JOB_RESULT">
<code class="descname">HEAD_JOB_RESULT</code><em class="property"> = b'JOB RESU'</em><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.HEAD_JOB_RESULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.HEAD_JOB_STATUS">
<code class="descname">HEAD_JOB_STATUS</code><em class="property"> = b'JOB STAT'</em><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.HEAD_JOB_STATUS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.HEAD_NEW_TASK">
<code class="descname">HEAD_NEW_TASK</code><em class="property"> = b'NEW TASK'</em><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.HEAD_NEW_TASK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.HEAD_PING">
<code class="descname">HEAD_PING</code><em class="property"> = b'PING    '</em><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.HEAD_PING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.STATUS_ERROR">
<code class="descname">STATUS_ERROR</code><em class="property"> = b'ERROR   '</em><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.STATUS_ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.STATUS_NOT_FOUND">
<code class="descname">STATUS_NOT_FOUND</code><em class="property"> = b'NOT FOUN'</em><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.STATUS_NOT_FOUND" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.STATUS_OK">
<code class="descname">STATUS_OK</code><em class="property"> = b'OK      '</em><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.STATUS_OK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.task_queue.QueueServer.check_connection">
<em class="property">static </em><code class="descname">check_connection</code><span class="sig-paren">(</span><em>address=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.check_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the queue server is running properly and accepting connections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>address</strong> &#8211; address to connect to (defaults to (settings.QUEUE_HOST
settings.QUEUE_PORT))</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">whether the server accepted connection properly</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.task_queue.QueueServer.communicate">
<em class="property">static </em><code class="descname">communicate</code><span class="sig-paren">(</span><em>head</em>, <em>content</em>, <em>*</em>, <em>address=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.communicate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.task_queue.QueueServer.get_job_return_code">
<em class="property">static </em><code class="descname">get_job_return_code</code><span class="sig-paren">(</span><em>job_id</em>, <em>*</em>, <em>address=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.get_job_return_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function which requests the local queue for job output.
It retrieves status code and console output from the process.
:param job_id: job identifier received on submission
:param address: local queue address
:type address: (str, int)
:return: output of the executed process
:rtype: ProcessOutput</p>
</dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.task_queue.QueueServer.get_job_status">
<em class="property">static </em><code class="descname">get_job_status</code><span class="sig-paren">(</span><em>job_id</em>, <em>*</em>, <em>address=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.get_job_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function which requests the local queue for job status.
It establishes the connection to the local queue server at specified
host and port. If not given, it uses default local queue address from
settings.
:param job_id: job identifier received on submission
:param address: local queue address
:type address: (str, int)
:return: job status string
:raise JobNotFoundError
:raise ServerError:</p>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.QueueServer.handle_request">
<code class="descname">handle_request</code><span class="sig-paren">(</span><em>header</em>, <em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.handle_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.QueueServer.job_result_request">
<code class="descname">job_result_request</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.job_result_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.QueueServer.job_status_request">
<code class="descname">job_status_request</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.job_status_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.task_queue.QueueServer.read_json">
<em class="property">static </em><code class="descname">read_json</code><span class="sig-paren">(</span><em>conn</em>, <em>length</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.read_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads json request of the given length from the client socket.
Specified length must be available in the socket; otherwise function
will raise BlockingIOError.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>conn</strong> &#8211; active client socket to read data from</li>
<li><strong>length</strong> &#8211; length of the json content</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dictionary corresponding to received json</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">dict</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><strong>json.JSONDecodeError</strong> &#8211; </li>
<li><strong>BlockingIOError</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.QueueServer.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a QueueServer thread which keeps listening on the socket to
incoming connections and manages job submissions and status checking.
When client is connected, a new thread is spawned to handle the
request and produce response.</p>
</dd></dl>

<dl class="attribute">
<dt id="slivka.scheduler.task_queue.QueueServer.running">
<code class="descname">running</code><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.running" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">if the queue server is running</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.task_queue.QueueServer.serialize_json">
<em class="property">static </em><code class="descname">serialize_json</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.serialize_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.QueueServer.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the server.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="slivka.scheduler.task_queue.QueueServer.submit_job">
<em class="property">static </em><code class="descname">submit_job</code><span class="sig-paren">(</span><em>cmd</em>, <em>cwd</em>, <em>env=None</em>, <em>*</em>, <em>address=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function which sends a new job to the local queue.
It establishes the connection to the worker server and send new job
details. You need to specify list of command arguments, working
directory and, optionally, environment variables.
By default, it connect to the queue address specified in the settings,
but you can override it specifying <cite>host</cite> and <cite>port</cite> arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cmd</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em></em>) &#8211; list of command line arguments to execute</li>
<li><strong>cwd</strong> (<em>str</em>) &#8211; absolute path of current working directory for the command</li>
<li><strong>env</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em></em>) &#8211; environment variables</li>
<li><strong>address</strong> (<em></em><em>(</em><em>str</em><em>, </em><em>int</em><em>)</em><em></em>) &#8211; local queue address</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">id of the newly created job</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.QueueServer.submit_task_request">
<code class="descname">submit_task_request</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.QueueServer.submit_task_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.task_queue.Signal">
<em class="property">class </em><code class="descclassname">slivka.scheduler.task_queue.</code><code class="descname">Signal</code><a class="headerlink" href="#slivka.scheduler.task_queue.Signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="slivka.scheduler.task_queue.Signal.call">
<code class="descname">call</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.Signal.call" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.Signal.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>slot</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.Signal.register" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.task_queue.TaskQueue">
<em class="property">class </em><code class="descclassname">slivka.scheduler.task_queue.</code><code class="descname">TaskQueue</code><span class="sig-paren">(</span><em>host=None</em>, <em>port=None</em>, <em>num_workers=4</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.TaskQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="slivka.scheduler.task_queue.TaskQueue.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.TaskQueue.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish the work of the task queue.</p>
<p>Puts kill worker signal for each alive worker to stop their threads and
pokes the server with a dummy request to make it stop listening and
return.</p>
<p>This function should not be called manually unless using asynchronous
interactive mode.</p>
</dd></dl>

<dl class="method">
<dt id="slivka.scheduler.task_queue.TaskQueue.start">
<code class="descname">start</code><span class="sig-paren">(</span><em>async=False</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.TaskQueue.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the server thread and workers.</p>
<p>Launches the task queue. Starts the server thread and all
worker threads. Then, it waits for KeyboardInterrupt signal
to call <code class="docutils literal"><span class="pre">shutdown</span></code> function and stop execution of the server and
workers.
If <code class="docutils literal"><span class="pre">async</span></code> parameter is set to true, queue will not block after
starting server and workers and <code class="docutils literal"><span class="pre">shutdown</span></code> must be called manually
from the main thread. This option is useful for interactive debugging
and unit testing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>async</strong> (<em>bool</em>) &#8211; don&#8217;t block after starting (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="slivka.scheduler.task_queue.Worker">
<em class="property">class </em><code class="descclassname">slivka.scheduler.task_queue.</code><code class="descname">Worker</code><span class="sig-paren">(</span><em>jobs_queue</em><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.Worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">threading.Thread</span></code></p>
<dl class="method">
<dt id="slivka.scheduler.task_queue.Worker.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#slivka.scheduler.task_queue.Worker.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs Worker thread which polls queue for commands and starts them.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-slivka.scheduler">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-slivka.scheduler" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">slivka.scheduler</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-slivka.scheduler.command">slivka.scheduler.command module</a></li>
<li><a class="reference internal" href="#module-slivka.scheduler.exc">slivka.scheduler.exc module</a></li>
<li><a class="reference internal" href="#module-slivka.scheduler.executors">slivka.scheduler.executors module</a></li>
<li><a class="reference internal" href="#module-slivka.scheduler.scheduler">slivka.scheduler.scheduler module</a></li>
<li><a class="reference internal" href="#module-slivka.scheduler.task_queue">slivka.scheduler.task_queue module</a></li>
<li><a class="reference internal" href="#module-slivka.scheduler">Module contents</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">Slivka Module Reference</a><ul>
      <li>Previous: <a href="slivka.db.html" title="previous chapter">slivka.db</a></li>
      <li>Next: <a href="slivka.server.html" title="next chapter">slivka.server</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/slivka.scheduler.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Mateusz Maciej Warowny.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/slivka.scheduler.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>